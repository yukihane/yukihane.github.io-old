<!DOCTYPE html>
<html lang="en"><head>
    





<title>Javaのソースファイルはpackageに対応したディレクトリ階層に置かなくても良い？ | 発火後忘失</title>

<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content='https://twitter.com/hishidama/status/1266176675768745984 packageの宣言と実際のディレクトリが一致していなくてもmvn compile（やjavac）が成功するんですが、そういうもんでしたっけ'>
<meta name="keywords" content='java'>
<meta name="msapplication-TileColor" content="#b91d47">
<meta name="theme-color" content="#ffffff">

<link rel="canonical" href="https://yukihane.github.io/posts/202005/29/java-source-location/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#007aa6">
<meta name="theme-color" content="#ffffff">

<meta property="og:title" content="Javaのソースファイルはpackageに対応したディレクトリ階層に置かなくても良い？" />
<meta property="og:description" content="https://twitter.com/hishidama/status/1266176675768745984 packageの宣言と実際のディレクトリが一致していなくてもmvn compile（やjavac）が成功するんですが、そういうもんでしたっけ" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yukihane.github.io/posts/202005/29/java-source-location/" />
<meta property="article:published_time" content="2020-05-29T08:28:07+00:00" />
<meta property="article:modified_time" content="2020-05-29T08:28:07+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Javaのソースファイルはpackageに対応したディレクトリ階層に置かなくても良い？"/>
<meta name="twitter:description" content="https://twitter.com/hishidama/status/1266176675768745984 packageの宣言と実際のディレクトリが一致していなくてもmvn compile（やjavac）が成功するんですが、そういうもんでしたっけ"/>

<meta itemprop="name" content="">
<meta itemprop="description" content="">
    
    
    
    
    
    <link rel="stylesheet" href='https://yukihane.github.io/css/style.css'>

    


<link href="https://fonts.googleapis.com/css?family=Hanuman:400,700|Inconsolata|Roboto:400,400i,700,700i&display=swap&subset=khmer" rel="stylesheet">
</head><body><header id="navigation" class="p-navigation">
    <div class="p-navigation__row">
        <div class="p-navigation__banner">
            <div class="p-navigation__logo">
                <a class="p-navigation__link u-vertically-center p-link--logo" href="https://yukihane.github.io/">
                    発火後忘失
                </a>
            </div>
            
            <a href="#navigation" class="p-navigation__toggle--open" title="menu">
                <i class="p-icon--menu"></i>
            </a>
            <a href="#navigation-closed" class="p-navigation__toggle--close" title="close menu">
                <i class="p-icon--close"></i>
            </a>
        </div>

        <nav class="p-navigation__nav">
            <span class="u-off-screen">
                <a href="#main-content">Jump to main content</a>
            </span>

            <ul class="p-navigation__links" role="menu">
                
            </ul>

            
            <form class="p-search-box" action="https://www.google.com/search" target="_blank">
    <input type="search" class="p-search-box__input" name="q" placeholder='Search'
        required="" aria-label="Query">
    <input type="hidden" name="sitesearch" value="https://yukihane.github.io/">
    <button type="reset" class="p-search-box__reset" alt="reset" aria-label="Reset">
        <i class="p-icon--close"></i>
    </button>
    <button type="submit" class="p-search-box__button" alt="search" aria-label="Search">
        <i class="p-icon--search"></i>
    </button>
</form>
            
        </nav>
    </div>
</header><div id="main-content">
<header class="p-strip page-banner">
    <div class="row">
        <h1>Javaのソースファイルはpackageに対応したディレクトリ階層に置かなくても良い？</h1>
    </div>

    

<div class="row">

    
    <div class="col-8">
        




<div class="p-media-object">

    

    <div class="p-media-object__details">

        

        
        <p class="p-media-object__content">
            <span class="u-capitalized">on</span>
            2020-05-29
        </p>
        

    </div>
</div>


    </div>
    

    
    <div class="col-4  col--share-links ">
        <ul class="p-inline-list-icons p-inline-list-icons--share-links u-no-padding--left u-no-margin--left u-unselectable">
    <li class="p-inline-list__item">
        <i class="p-icon--share"></i>
    </li>
    <li class="p-inline-list__item">
        <a class="p-icon--facebook" title='Share on Facebook' target="_blank"
            rel="noreferrer" href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fyukihane.github.io%2fposts%2f202005%2f29%2fjava-source-location%2f">
            Facebook
        </a>
    </li>
    <li class="p-inline-list__item">
        <a class="p-icon--twitter" title='Share on Twitter' target="_blank"
            rel="noreferrer" href="http://twitter.com/share?text=Java%e3%81%ae%e3%82%bd%e3%83%bc%e3%82%b9%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%afpackage%e3%81%ab%e5%af%be%e5%bf%9c%e3%81%97%e3%81%9f%e3%83%87%e3%82%a3%e3%83%ac%e3%82%af%e3%83%88%e3%83%aa%e9%9a%8e%e5%b1%a4%e3%81%ab%e7%bd%ae%e3%81%8b%e3%81%aa%e3%81%8f%e3%81%a6%e3%82%82%e8%89%af%e3%81%84%ef%bc%9f&amp;url=https%3a%2f%2fyukihane.github.io%2fposts%2f202005%2f29%2fjava-source-location%2f">
            Twitter
        </a>
    </li>
    <li class="p-inline-list__item">
        <a class="p-icon--linkedin" title='Share on LinkedIn' target="_blank"
            rel="noreferrer"
            href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fyukihane.github.io%2fposts%2f202005%2f29%2fjava-source-location%2f&amp;title=Java%e3%81%ae%e3%82%bd%e3%83%bc%e3%82%b9%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%afpackage%e3%81%ab%e5%af%be%e5%bf%9c%e3%81%97%e3%81%9f%e3%83%87%e3%82%a3%e3%83%ac%e3%82%af%e3%83%88%e3%83%aa%e9%9a%8e%e5%b1%a4%e3%81%ab%e7%bd%ae%e3%81%8b%e3%81%aa%e3%81%8f%e3%81%a6%e3%82%82%e8%89%af%e3%81%84%ef%bc%9f">
            LinkedIn
        </a>
    </li>
</ul>
    </div>
    

</div>




<div class="row">
    <div class="col-12">
        
<a href="https://yukihane.github.io/tags/java/">#java</a>&ensp;

    </div>
</div>

</header>

<section class="p-strip is-shallow">
    <main class="row post-content">
        <div class="paragraph">
<p><a href="https://twitter.com/hishidama/status/1266176675768745984" class="bare">https://twitter.com/hishidama/status/1266176675768745984</a></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>packageの宣言と実際のディレクトリが一致していなくてもmvn compile（やjavac）が成功するんですが、そういうもんでしたっけ？</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>classファイルのパッケージと実際のディレクトリーは対応させないといけないんですけど、ソースファイルについてはそういう制限は無いんですよね。でもけっこう勘違いされているような＾＾；</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>この辺の話が正当かどうか、という話です。</p>
</div>
<div class="paragraph">
<p><code>javac</code> のリファレンス、 <a href="https://docs.oracle.com/en/java/javase/14/docs/specs/man/javac.html#arrangement-of-source-code">Arrangement of Source Code</a> セクションには次のように書かれています:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In the Java language, classes and interfaces can be organized into packages, and packages can be organized into modules. javac expects that the physical arrangement of source files in directories of the file system will mirror the organization of classes into packages, and packages into modules.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>また、 <a href="https://docs.oracle.com/javase/tutorial/java/package/managingfiles.html">The Java™ Tutorials &gt; Managing Source and Class Files</a> では、</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Many implementations of the Java platform rely on hierarchical file systems to manage source and class files, although The Java Language Specification does not require this.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>ちゃんと読んでないですが The Java® Language Specification だと <a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-7.html#jls-7.2">7.2. Host Support for Modules and Packages</a> 辺りが該当するのでしょうか。</p>
</div>
<div class="paragraph">
<p>そんなわけで、(ソースファイルだけでなく)クラスファイルもディレクトリ階層とパッケージを対応付けているのは仕様に拠るものではない、ただし各種実装はそのようにファイルが配置されていることを期待しているのでそれに従いましょう、ということですね。</p>
</div>
<div class="paragraph">
<p>ソースファイルがどうでもよくてクラスファイルは従わなくてはならないのは「たまたま実装がそうなっているから」だ、ということのようです。</p>
</div>
<div class="paragraph">
<p>ちなみに <code>java</code> コマンドの <a href="https://docs.oracle.com/en/java/javase/14/docs/specs/man/java.html#using-source-file-mode-to-launch-single-file-source-code-programs">source-file mode</a> については、ディレクトリ階層は関係ないぜ、ってのが例から読み取れますね。</p>
</div>

    </main>
</section>

<footer class="p-strip is-wrapper">
    <div class="row">
        <div class="p-article-pagination">
    
    <a class="p-article-pagination__link--previous" href="https://yukihane.github.io/posts/202005/27/minimal-vimrc/">
        <span class="p-article-pagination__label">Previous</span>
        <span class="p-article-pagination__title">
            ミニマル `.vimrc`
        </span>
    </a>
    

    
</div>
    </div>
</footer>

        </div><footer class="p-strip is-shallow page-footer">
    <div class="row">
        <div class="col-12  u-align--center">
            <p>
                © 2020 発火後忘失
            </p>
        </div>
    </div>
</footer>




</body>
</html>
